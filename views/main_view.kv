#:import IconButton widgets.icon_button.IconButton 


<HomeScreen>:
    name: "home"
    FloatLayout:
        # Fundo verde pastel, atrás da imagem
        canvas.before:
            Color:
                rgba: 0.729, 0.922, 0.851, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Imagem ocupa toda a tela, podendo distorcer para cobrir tudo
        Image:
            source: "assets/inicio.jpeg"
            size_hint: 1, 1
            pos_hint: {"x": 0, "y": 0}
            allow_stretch: True
            keep_ratio: False

        # Conteúdo por cima da imagem
        Label:
            text: "KivyMarket"
            font_size: "28sp"
            bold: True
            color: 0, 0, 0, 1
            size_hint_y: None
            pos_hint: {"center_x": 0.5, "center_y": 0.22}

        Button:
            text: ">"
            font_size: "32sp"
            background_color: 0, 0, 0, 0
            color: 0, 0, 0, 1
            size_hint: None, None
            size: 50, 50
            pos_hint: {"center_x": 0.5, "y": 0.05}
            on_press:
                app.root.current = "menu"


<MenuScreen>:
    name: "menu"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 0.729, 0.922, 0.851, 1  # Cor verde pastel
            Rectangle:
                pos: self.pos
                size: self.size

        # Botão voltar
        Button:
            text: "< Voltar"
            size_hint: None, None
            size: 100, 40
            pos_hint: {"x": 0.02, "top": 0.98}
            background_color: 0, 0, 0, 0
            color: 0, 0, 0, 1
            on_press:
                app.root.current = "home"

        # Saudação
        Label:
            text: "Olá, Usuário!"
            font_size: "22sp"
            bold: True
            color: 0, 0, 0, 1
            size_hint: None, None
            size: self.texture_size
            pos_hint: {"center_x": 0.5, "top": 0.90}

        # Botões centrais
        BoxLayout:
            size_hint: None, None
            size: 300, 150
            pos_hint: {"center_x": 0.5, "center_y": 0.45}
            spacing: 20

            # Botão Cadastro
            IconButton:
                text: "Cadastro"
                icon: "assets/icone_cadastro.png"
                on_press: app.root.current = "produtos"

            # Botão Lista
            IconButton:
                icon: "assets/icone_lista.png"
                text: "Lista"
                on_press: app.root.current = "lista"

<ProdutoScreen>:
    name: "produtos"
    ProdutoController:
        id: produto_controller

<ProdutoController>:
    canvas.before:
        Color:
            rgba: 0.729, 0.922, 0.851, 1  # Cor verde pastel
        Rectangle:
            pos: self.pos
            size: self.size

    #Diz que os elementos vão ser organizados um abaixo do outro (layout vertical).

    orientation: "vertical"
    padding: 10
    spacing: 10

    #----
    #Botão voltar
    BoxLayout:
        size_hint_y: None
        height: 40
        Button:
            text: "< Voltar"
            size_hint_x: None
            width: 100
            background_color: 0, 0, 0, 0  # fundo transparente
            color: 0, 0, 0, 1
            font_size: 18
            bold: True
            on_press:
                app.root.current = "menu"
    #----
               
    Label:
        text: "Cadastro de Produto"
        font_size: 26
        bold: True
        color: 0, 0, 0, 1
        size_hint_y: None
        height: 50

    #Uma linha horizontal com os campos e botão "Adicionar".

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        size_hint_y: None
        height: self.minimum_height

        #Campo de texto onde o usuário digita o nome. minimalista

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 300, 60
            pos_hint: {"center_x": 0.5}

            Label:
                text: "Nome do produto"
                size_hint_y: None
                height: 20
                color: 0, 0, 0, 1
                font_size: 14
                bold: True #bold: True → negrito
                halign: "left" #alinha o texto horizontalmente à esquerda
                valign: "middle"
                text_size: self.size #faz o alinhamento funcionar corretamente (sem isso, não respeita o halign)
            
            TextInput:
                id: nome_input
                background_color: 0, 0, 0, 0
                foreground_color: 0, 0, 0, 1
                size_hint_y: None
                height: 30
                multiline: False
                canvas.after:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        points: self.x, self.y, self.right, self.y
                        width: 1
        
        #Fim do campo de texto onde o usuário digita o nome
        #-------------
        #Começo do campo de texto onde o usuário digita o preço

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 300, 60
            pos_hint: {"center_x": 0.5}

            Label:
                text: "Preço"
                size_hint_y: None
                height: 20
                color: 0, 0, 0, 1
                font_size: 14
                bold: True #bold: True → negrito
                halign: "left" #alinha o texto horizontalmente à esquerda
                valign: "middle"
                text_size: self.size #faz o alinhamento funcionar corretamente (sem isso, não respeita o halign)

            TextInput:
                id: preco_input
                input_filter: "float"
                background_color: 0, 0, 0, 0
                foreground_color: 0, 0, 0, 1
                size_hint_y: None
                height: 30
                multiline: False
                canvas.after:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        points: self.x, self.y, self.right, self.y
                        width: 1
        #Fim do campo de texto onde o usuário digita o preço.
        #---- 
        #Começo do campo de texto onde o usuário digita a qtd.

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 300, 60
            pos_hint: {"center_x": 0.5}

            Label:
                text: "Quantidade"
                size_hint_y: None
                height: 20
                color: 0, 0, 0, 1
                font_size: 14
                bold: True #bold: True → negrito
                halign: "left" #alinha o texto horizontalmente à esquerda
                valign: "middle"
                text_size: self.size #faz o alinhamento funcionar corretamente (sem isso, não respeita o halign)

            TextInput:
                id: qtd_input
                input_filter: "int"
                background_color: 0, 0, 0, 0
                foreground_color: 0, 0, 0, 1
                size_hint_y: None
                height: 30
                multiline: False
                canvas.after:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        points: self.x, self.y, self.right, self.y
                        width: 1
        #Fim do campo de texto onde o usuário digita a qtd.
        #---------------
        #Botão que chama o método adicionar_produto() da classe ProdutoController.

        BoxLayout:
            size_hint: None, None
            size: 300, 45
            pos_hint: {"center_x": 0.5}
            Button:
                id: btn_add
                text: "Adicionar"
                background_color: 0, 0, 0, 1
                color: 1, 1, 1, 1
                font_size: 16
                size_hint_y: None
                height: 45
                on_press: root.adicionar_produto()
            #----

<ListaScreen>:
    name: "lista"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 0.729, 0.922, 0.851, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Button:
            text: "< Voltar"
            size_hint: None, None
            size: 100, 40
            pos_hint: {"x": 0.02, "top": 0.98}
            background_color: 0, 0, 0, 0
            color: 0, 0, 0, 1
            on_press:
                app.root.current = "menu"

        Label:
            text: "Lista de Produtos"
            font_size: 26
            bold: True
            color: 0, 0, 0, 1
            size_hint: None, None
            size: self.texture_size
            pos_hint: {"center_x": 0.5, "top": 0.90}

        ScrollView:
            pos_hint: {"center_x": 0.5, "y": 0.05}
            size_hint: 0.95, 0.8
            BoxLayout
                id: lista_produtos
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height

